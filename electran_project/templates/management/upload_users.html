{% extends "custom_base.html" %}
{% load crispy_forms_tags %}
{% block content %}

    <div class="">
        <div class="col-md-8 col-md-offset-4 sem-qus-semester-list-container">
            <h3>Semester: <span>{{semester}}</span></h3>
        </div>
        <form method="POST" enctype="multipart/form-data" class="col-md-12 user-upload-form">
            {% csrf_token %}
            {{ form|crispy }}
            <input type="hidden" value="upload" name="hidden_type">
            <input type="submit" class="btn btn-primary electran-submit-btn" value="submit" name="submit">
        </form>
        <form method="POST">
            {% csrf_token %}
            <input type="hidden" value="email" name="hidden_type">
            <div class="col-md-12 semester-user-table-container">
                <table class="table table-striped semester-user-table electran-table">
                    <caption><span class="register-table-title">List of Users in semester {{ semester }}</span></caption>
                    <thead>
                        <tr>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Username</th>
                        <th>Email</th>
                        <th>Student Number</th>
                        <th>Is Registered</th>
                        <th>Edit user</th>
                        <th>Edit user semester</th>
                        <th>Send email</th>

                        </tr>
                    </thead>
                    <tbody>
                    {% for user in users %}
                        <tr>
                        <td>{{user.user.first_name}}</td>
                        <td>{{user.user.last_name}}</td>
                        <td>{{user.user.username}}</td>
                        <td>{{user.user.email}}</td>
                        <td>{{user.user.student_no}}</td>
                        {% if user.is_registered_for_semester %}
                            <td>Yes</td>
                        {% else %}
                            <td>No</td>
                        {% endif %}

                        <td><a target="_blank" href="/admin/custom_accounts/myuser/{{user.user.id}}/change/">Edit</a></td>
                        <td><a target="_blank" href="/admin/management/usersemester/{{user.id}}/change/">Edit</a></td>
                        <td>
                            <input class="catCheckAll" value="{{user.user_id}}" type="checkbox"
                                   id="chkCatCheckAll{{user.user_id}}" name="email_students">
                        </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            <input type="submit" class="btn btn-primary electran-submit-btn email_btn" value="Email Students" name="submit">
            </div>
        </form>
    </div>

{% endblock %}